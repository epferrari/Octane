/* octane -  - 2014-12-29*/!function(a,b){var c={isObject:function(a,b){return b?"object"==typeof a&&null!==a:"object"==typeof a&&null!==a&&!(a instanceof Array)},isArray:function(a){return"object"==typeof a&&a instanceof Array&&a.length>=0},isFalsey:function(a){var b="case_"+a,c={case_false:function(){return!0},case_0:function(){return!0},case_null:function(){return!0},case_undefined:function(){return!0},case_:function(){return!0}};return b=b.trim(),c[b]?c[b]():!1},isUndefined:function(a){return"undefined"==typeof a},isNull:function(a){return null===a},isBlank:function(a){var b="case_"+a,c={case_undefined:function(){return!0},case_null:function(){return!0},case_:function(){return!0}};return b=b.trim(),c[b]?c[b]():!1},is$:function(a){return a instanceof jQuery},createEvent:function(a){var b;try{b=new Event(a)}catch(c){b=document.createEvent("event"),b.initEvent(a,!0,!1)}return b},customEvent:function(a,c){var d;if(b.CustomEvent)try{c=c||{bubbles:!1,cancelable:!1,detail:{}},d=new CustomEvent(a,c)}catch(e){d=document.createEvent("CustomEvent"),d.initCustomEvent(a,c.bubbles||!1,c.cancelable||!1,c.detail||{})}else d=document.createEvent("CustomEvent"),d.initCustomEvent(a,c.bubbles||!1,c.cancelable||!1,c.detail||{});return d},Switch:function(a){function b(a,b,d){return d?void("undefined"==c.typeOf(f[a])&&(f[a]=[b])):(f[a]=!_.isArray(f[a])&&[],_.isFunction(b)&&f[a].push(b),e)}function d(a,b){function c(a,b){var c=a.length;if(1==c)return a[0].apply(null,b);for(var d=0;c>d;d++)setTimeout(function(){a[d].apply(null,b)},0)}f["default"]||(f["default"]=[function(){return!1}]);return b=_.isArray(b)?b:_.isString(b)?b.split(","):[],f[a]?c(f[a],b):f["default"][0](b)}var e=this,f={};if(_.isObject(a))for(var g in a)({}).hasOwnProperty.call(a,g)&&b(g,a[g]);this.addCase=function(a,c){return b(a,c)},this.run=function(a,b){return d(a,b)},this.getCases=function(){return f}},typeOf:function(a){return{}.toString.call(a).match(/\s([a-zA-Z]+)/)[1].toLowerCase()},location:function(){var a,d,e=document.createElement("a"),f={};e.href=b.location,a=e.search.replace(/^\?/,"").split("&");for(var g=0,h=a.length;h>g;g++)if(d=a[g].split("="),!c.isBlank(d)){var i=d[0],j=d[1];f[i]=j}return{protocol:e.protocol,host:e.host,hostname:e.hostname,port:e.port,pathname:e.pathname,searchString:e.search,searchObject:f,hash:e.hash}},titleize:function(a){return"string"==c.typeOf(a)?a.replace(/\-+|[_]+/," ").replace(/^.|\s+?[a-z]/g,function(a){return a.toUpperCase()}):void 0},camelize:function(a){return"string"==c.typeOf(a)?a.replace(/\W+?[a-z]|\_+?[a-z]/g,function(a){return a.toUpperCase()}).replace(/\W+|\_+/g,""):void 0},dashify:function(a){return"string"==c.typeOf(a)?a.replace(/\s+|[_]+/g,"-").replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()}).replace(/-{2}/g,"-"):void 0},inArray:function(a,b){return-1!==a.indexOf(b)}};!String.prototype.__titleize&&Object.defineProperty(String.prototype,"__titleize",{value:function(){return this.replace(/\-+|[_]+/," ").replace(/^.|\s+?[a-z]/g,function(a){return a.toUpperCase()})},configurable:!1,writable:!1,enumerable:!1}),!String.prototype.__camelize&&Object.defineProperty(String.prototype,"__camelize",{value:function(){return this.replace(/\W+?[a-z]|\_+?[a-z]/g,function(a){return a.toUpperCase()}).replace(/\W+|\_+/g,"")},configurable:!1,writable:!1,enumerable:!1}),!String.prototype.__dashify&&Object.defineProperty(String.prototype,"__dashify",{value:function(){return this.replace(/\s+|[_]+/g,"-").replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()}).replace(/-{2}/g,"-")},configurable:!1,writable:!1,enumerable:!1}),!Function.prototype.__construct&&Object.defineProperty(Function.prototype,"__construct",{value:function(a){var b=this.prototype,c=Object.create(b);return this.apply(c,a),c},configurable:!1,writable:!1,enumerable:!1}),!Array.prototype.__contains&&Object.defineProperty(Array.prototype,"__contains",{value:function(a){return-1!==this.indexOf(a)},configurable:!1,writable:!1,enumerable:!1}),!Array.prototype.__isEmpty&&Object.defineProperty(Array.prototype,"__isEmpty",{value:function(){return 0===this.length},configurable:!1,writable:!1,enumerable:!1}),!Object.prototype.__isEmpty&&Object.defineProperty(Object.prototype,"__isEmpty",{value:function(){var a;for(a in this)if({}.hasOwnProperty.call(this,a))return!1;return!0},configurable:!1,writable:!1,enumerable:!1}),b[a]=c}("__",window),function(a,b,c){function d(a){this.name=b.isString(a)&&a}function e(a,c,d){a=b.isArray(a)?a:[];for(var e=0,f=a.length;f>e;e++)if(!a[e][0])return q.errors.log("Context: "+d+". A "+c+" failed; "+a[e][1]),!1;return!0}function f(a,c){var d=b.isObject(c)?c:{};this.name=a,this.checkout=function(){return d},this.contrib=function(a,b){d[a]||(d[a]=b)}}function g(a,c){var d=b.isObject(c)?c:{};this.get=function(){return d}}function h(a,c){c=b.isObject(c)?c:{},c.context=c.context||"global";var f=[[b.isString(a),"Model name must be a string."]],g=e(f,"Model",c.context);if(!g)return{instanced:!1};var h={},i=this;this.define({instanced:!0,name:a,context:c.context,state:{}});var k=new j(i);this.define({access:function(a){return h[a]},reScope:function(){k.parse()}}),function(b){q.models[a]=b,d.prototype.extend.call(h,c.db),b.set(c.defaults)}(this)}function i(a,b){b=b||"global";var d=[[a instanceof h,"defined $model is not an instance of Octane.Model"],[a.instanced,"$model passed as argument was not initialized"]],f=e(d,"Controller",b);if(!f)return{instanced:!1};var g=this;this.define({instanced:!0,model:a,context:b,tasks:new c.Switch,audits:{},parsers:{},hooks:{}}),function(){q.controllers.push(g);var a=g.model.name+":statechange";Octane.handle(a,g)}()}function j(a){var b=this;this.define({instanced:!0,model:a,watcher:new c.Switch,scope:{}}),function(a){a.watcher.addCase("input",function(b){a.uptake(b.srcElement)}).addCase("select",function(b){a.uptake(b.srcElement)}).addCase("click",function(b){a.uptake(b.srcElement)}).addCase(a.model.name+":statechange",function(){a.refresh()}),Octane.handle("input click "+a.model.name+":statechange",a),a.parse(),a.refresh()}(b)}function k(a){this.name=a;var d=[[b.isString(this.name)&&!c.isBlank(this.name),"Module name is undefined"]],f=e(d,"Module","global");return f?void this.define({instanced:!0,Model:function(a,c){return c=b.isObject(c)?c:{},c.context=this.name,new h(a,c)},Controller:function(a){return new i(a,this.name)}}):{instanced:!1}}function l(a,b,d){d="function"==c.typeOf(arguments[2])?arguments[2]:arguments[1],d.prototype=new k(a),Octane.extend.call(d,{dependencies:"array"==c.typeOf(arguments[1])?arguments[1]:[],id:a,loaded:!1}),q.modules[a]=d}function m(a){a=a||{};for(var c in a)({}).hasOwnProperty.call(a,c)&&q.modules[c]&&(q.modules[c].initArgs=b.isArray(a[c])?a[c]:[]);for(var d in q.modules)({}).hasOwnProperty.call(q.modules,d)&&n(q.modules[d])}function n(a){if(a.prototype instanceof k&&o(a)){if(a.loaded)return;Octane.extend(a.__construct(a.initArgs)),q.modules[a.id].loaded=!0,Octane.fire("loaded:module",{detail:{message:"Loading Module "+a.id+"...",progress:Math.floor(99/(Object.keys(q.modules).length-2))}})}}function o(a){for(var c=b.isString(a.dependencies)?a.dependencies.split(","):b.isArray(a.dependencies)?a.dependencies:[],d=0,e=c.length;e>d;d++){var f=c[d].trim(),g=q.modules[f];if(!(g&&g.prototype instanceof k))return errors.log("Could not load "+a.name+" Module, missing dependency "+f),!1;g.loaded||n(g)}return!0}function p(a){a=a||{},q.modules.Debug&&(a.Debug=[q]),m(a),Octane.name=a.name||Octane.name;var b=document.getElementsByTagName("html")[0].getAttribute("class").split(" "),d=c.inArray(b,"history"),e=Octane.parseView(d)||"home";Octane.fire("Octane:ready",{detail:e})}if(!window.__)return!1;if(window.Octane)return!1;document.createElement("o-container"),document.createElement("o-view-canvas"),document.createElement("o-view"),document.createElement("o-model"),document.createElement("o-lang"),Object.defineProperty(d.prototype,"extend",{value:function(a,c){c=b.isBoolean(c)?c:!0;var d;if(b.isObject(a))for(d in a)({}).hasOwnProperty.call(a,d)&&(c?this[d]=a[d]:this[d]||(this[d]=a[d]));return this},writable:!1,configuarable:!1}),Object.defineProperty(d.prototype,"define",{value:function(a,c,d){switch(b.isBoolean(arguments[0])?(a=arguments[0],c=arguments[1],d=arguments[2]):(c=arguments[0],d=arguments[1],a=!1),!0){case b.isObject(c):for(var e,f=Object.keys(c),g=0,h=f.length;h>g;g++)e=f[g],Object.defineProperty(this,e,{value:c[e],configurable:!1,writable:a,enumerable:!0});break;case b.isString(c):Object.defineProperty(this,c,{value:d,configurable:!1,writable:a,enumerable:!0})}return this},writable:!1,configuarable:!1}),Octane=$o=new d("Octane");var q=new d("Octane protected");q.define({modules:{},models:{},views:{},controllers:[]}),Octane.define({GUID:function(){var a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1).toUpperCase()};return"Octane"+a()+"-"+a()+"-"+a()+a()}}),q.errors={logfile:[],log:function(a){this.logfile.push(a)},get:function(){return this.logfile}},Octane.define({trip:function(a){var b=Math.random(),d=c.customEvent("input",{bubbles:!0,detail:b});a.dispatchEvent&&a.dispatchEvent(d)}}),q.eventRegister={},Octane.define({handle:function(a,c){for(var d=a?a.split(" "):[],e=0,f=d.length;f>e;e++)window.addEventListener(d[e],c,!1),b.isArray(q.eventRegister[d[e]])||(q.eventRegister[d[e]]=[]),q.eventRegister[d[e]].push(c)},fire:function(a,d){if(b.isString(a)){var e=d?c.customEvent(a,d):c.createEvent(a);window.dispatchEvent(e)}}}),q.audits=new c.Switch,Octane.define({addAudit:function(a,c,d){c=c||/.*/,d=d||/.*/;var e=function(a){switch(!0){case c.test(a):return{data:a,result:"valid"};case b.isEmpty(a)||b.isUndefined(a):return{data:null,result:"undefined"};case d.test(a):return{data:null,result:"invalid"};default:return{data:a,result:"default"}}};q.audits.addCase(a,e,!0)}}),Octane.addAudit("number",/^[-]*\d+$/),Octane.addAudit("email",/^[-0-9a-zA-Z]+[-0-9a-zA-Z.+_]+@(?:[A-Za-z0-9-]+\.)+[a-zA-Z]{2,4}$/),Octane.addAudit("tel",/^[-0-9\.]{7,12}$/),q.libraries={},q.dictionaries={},Octane.define({Library:function(a,c){q.libraries[a]=b.isObject(c)?new f(a,c):{}},lib:function(a){return q.libraries[a]instanceof f&&q.libraries[a].checkout()},Dictionary:function(a,c){q.dictionaries[a]=b.isObject(c)?new g(a,c):{}},dict:function(a){return q.dictionaries[a]instanceof g&&q.dictionaries[a].get()}}),h.prototype=new d,h.prototype.constructor=h,h.prototype.define({set:function(a){if(b.isObject(a)&&b.isObject(this.state)){for(var c=[],d=this.state,e=Object.keys(a),f=0,g=e.length;g>f;f++){var h,i=e[f],j=i.split("."),k=a[i],l=j.length;try{j.reduce(function(a,c,d){return a[c]=d==l-1?k:b.isObject(a[c])?a[c]:{}},d),h=!0}catch(m){h=!1,q.errors.log('Unable to set model data "'+i+'". Error: '+m)}h&&c.push(i)}var m=this.name+":statechange";Octane.fire(m,{detail:c})}},get:function(a){var b=this;if(a){var c=a.split(".");try{stateData=c.reduce(function(a,b){return a[b]},b.state)}catch(d){stateData="",q.errors.log('Unable to get model data "'+a+'". Error: '+d)}return stateData}return this.state},process:function(a){for(var b=q.controllers,c=0,d=b.length;d>c;c++)b[c].model.name==this.name&&b[c].doAudit(a)}}),Octane.define({Model:function(a,c){return c=b.isObject(c)?c:{},new h(a,c)}}),i.prototype=new d,i.prototype.constructor=i,i.prototype.define({audit:function(a,b){return this.audits[a]=b,this},parser:function(a,c){var d=this;return b.isFunction(c)&&b.isUndefined(this.parsers[a])&&(this.parsers[a]=c.bind(d)),this},hook:function(a,b){return this.hooks[a]=new c.Switch(b),this},task:function(a,c){var d=this;return b.isFunction(c)&&this.tasks.addCase(a,function(){var b=d.model.get(a);c.bind(d)(a,b)}),this},fetch:function(a){return this.model.access(a)},doAudit:function(a){function c(a){function c(b,c,e){var f=q.audits.run(b,[e[c]]);return a[c]=f.data,d.hooks[c]?d.hooks[c].run(f.result,[a]):a}a=b.isObject(a)?a:{};for(var e in a)if({}.hasOwnProperty.call(a,e)){var f=d.audits[e];d.audits[e]&&c(f,e,a)}return a}var d=this,e=c(a);this.applyParsers(e)},applyParsers:function(a){if(b.isObject(a)){for(var c in a)({}).hasOwnProperty.call(a,c)&&(a=this.parsers[c]?this.parsers[c](a):a);this.model.set(a)}},handleEvent:function(a){function b(a){for(var b=0,c=a.length;c>b;b++){var e=a[b];setTimeout(function(){d.tasks.run(e)},0)}}var d=this,e=new c.Switch;e.addCase(this.model.name+":statechange",b),e.run(a.type,[a.detail])}}),Octane.define({Controller:function(a){return new i(a)}}),j.prototype=new d,j.prototype.define({parse:function(){for(var a=document.querySelectorAll('[o-bind^="'+this.model.name+'."]'),d=document.querySelectorAll('[o-update*="'+this.model.name+'."]'),e=[],f=0,g=a.length;g>f;f++)e.push(a[f]);for(var h=0,i=d.length;i>h;h++)c.inArray(e,d[h])||e.push(d[h]);for(var j=0,k=e.length;k>j;j++){var l=e[j];$bind=l.getAttribute("o-bind"),$update=b.invert(JSON.parse(l.getAttribute("o-update")))||{},l._guid||(l._guid=Octane.GUID(),l._bind=$bind,l._update=$update,l._filters=JSON.parse(l.getAttribute("o-filters"))),$bind&&(b.isArray(this.scope[$bind])||(this.scope[$bind]=[]),c.inArray(this.scope[$bind],l)||this.scope[$bind].push(l));for(var m in $update)({}).hasOwnProperty.call($update,m)&&(b.isArray(this.scope[m])||(this.scope[m]=[]),c.inArray(this.scope[m],l)||this.scope[m].push(l))}},refresh:function(){function a(a,b,d){var e=new c.Switch({html:function(){a.innerHTML=d},text:function(){a.textContent=d},"default":function(){a.setAttribute(b,d)}});e.run(b)}for(var b in this.scope)if({}.hasOwnProperty.call(this.scope,b))for(var d=0,e=this.scope[b].length;e>d;d++){var f=this.scope[b][d],g=f._bind?f._bind.split(".").slice(1).join("."):"",h=f._update;f.value=this.model.get(g);for(var b in h)({}).hasOwnProperty.call(h,b)&&(g=b.split(".").slice(1).join("."),a(f,h[b],this.model.get(g)))}},uptake:function(a){var b=a._bind,c=b?b.split(".").slice(1).join("."):"",d={};this.scope[b]&&a.value!=this.model.get(c)&&(d[c]=a.value,this.model.process(d))},handleEvent:function(a){this.watcher.run(a.type,[a])}}),k.prototype=new d,k.prototype.constructor=k,Octane.define({Module:function(a,b,c){return l(a,b,c)},hasModule:function(a){return q.modules[a]?q.modules[a].loaded:!1}}).define({process:function(a,b){for(var c=q.controllers,d=0,e=c.length;e>d;d++)c[d].model.name==a&&c[d].sanitize(b)}}).define({$model:new h("Octane")}).define({$ctrl:new i(Octane.$model)}).define({dom:{}}).handle("Octane:ready",function(a){setTimeout(function(){Octane.dom.container().setAttribute("style","visibility:visible;"),Octane.route(a.detail)},500)}),Octane.define.call(Octane.dom,{container:function(){return document.getElementsByTagName("o-container")[0]||document.createElement("o-container")},canvas:function(){return document.getElementsByTagName("o-canvas")[0]||document.createElement("o-canvas")},views:function(){return document.getElementsByTagName("o-view")||[]}}),Octane.extend({init:function(a){return p(a)}})}($,_,__),Octane.Module("Router",[],function(a){function b(a){a=_.isObject(a)?a:{};var b=__.location().searchObject;Octane.extend.call(b,a);var c=[];for(var d in b)({}).hasOwnProperty.call(b,d)&&c.push(d+"="+b[d]);c=c.join("&"),c="?"+c;var e=Octane.getLang(),f=__.titleize(a.view)||__.titleize(l);History.pushState({lang:e},Octane.name+" | "+f,c)}function c(a,d){function e(a,e){a.load().done(function(){!d&&b({view:a.id}),a.doCallbacks(),l=a,Octane.$model.process({currentView:a.id}),k=!1,n.length>0&&c(n.pop()),e.resolve()})}d=_.isBoolean(d)?d:!1;var f=m[a],g=$.Deferred();return f instanceof i&&f!=l?k?n.push(a):(k=!0,l instanceof i?l.exit().done(function(){e(f,g)}):e(f,g)):g.reject(),g}function d(a,b){return m[a]instanceof i&&m[a].addCallback(b),this}function e(a){m[a]instanceof i&&m[a].exit(),Octane.$model.process({currentView:""})}function f(){for(var a=document.querySelectorAll(".o-btn"),b=a.length;b--;){var c=a[b].getAttribute("o-route");!function(a,b){a.addEventListener("click",function(){return Octane.route(b)})}(a[b],c)}}function g(a){if(a)return __.location().searchObject.view||!1;var b,c=window.location.hash,d={};return function(){c=c.replace("#?",""),c=c.split("&");for(var a=0,e=c.length;e>a;a++)b=c[a].split("="),d[b[0]]=b[1]}(),d.view||!1}function h(){for(var a,b,c=Octane.dom.views(),d=0,e=c.length;e>d;d++)a=c[d].id,b=JSON.parse(c[d].getAttribute("o-config")),!m[a]&&(m[a]=new i(a,b));f();var h=document.getElementsByTagName("html")[0].getAttribute("class").split(" "),j=__.inArray(h,"history"),k=j?"popstate":"hashchange";window.addEventListener(k,function(){var a=g(j);a&&Octane.route(a).done(function(){})}),Octane.handle("translated resize orientationchange",function(){l&&l.setCanvasHeight()})}function i(a,b){if(!_.isString(a))return{instanced:!1};b=_.isObject(b)?b:{};var c=["left","right","top","bottom","behind","invisible","onscreen"],d=_.isObject(b.loads),e=_.isObject(b.exits),f={loadsBy:d&&b.loads.by||"slide",loadsFrom:d&&__.inArray(c,b.loads.from)?b.loads.from:"left",loadEasing:d&&b.loads.ease||"swing",loadDuration:d&&_.isNumber(b.loads.dur)?b.loads.dur:500,onLoadComplete:function(b){b&&b.resolve(a)},exitsBy:e&&b.exits.by||"slide",exitsTo:e&&__.inArray(c,b.exits.to)?b.exits.to:"right",exitEasing:e&&b.exits.ease||"swing",exitDuration:e&&_.isNumber(b.exits.dur)?b.exits.dur:500,onExitComplete:function(b){b&&b.resolve(a)}};this.define(f),this.define({instanced:!0,id:a,elem:document.getElementById(a),$elem:$("o-view#"+a),_guid:Octane.GUID(),doneLoading:[],addCallback:function(a){this.doneLoading.push(a)}}),this.setPosition(this.loadsFrom)}if(_.isObject(a))try{$animations=a.animations.exits&&a.animations.loads?a.animations:Octane.lib("viewAnimations")}catch(j){$animations=Octane.lib("viewAnimations"),Octane.hasModule("Debug")&&Octane.log("Could not load user-defined view animations. Error: "+j+". Using default")}!function(a){History.Adapter.bind(a,"statechange",function(){History.getState()})}(window);var k,l,m={},n=[];this.define({initRouter:function(){return h()},parseView:function(a){return g(a)},route:function(a,b){return c(a,b).then(Octane.translate)},routeThen:function(a,b){return d(a,b)},exit:function(a){return e(a)},pushState:function(a){b(a)},getCurrentView:function(){return l}}),Octane.hasModule("Debug")&&this.define({getViews:function(){return m}}),Octane.$ctrl.parser("currentView",function(a){return a.currentViewTitle=__.titleize(a.currentView),a});var o=Octane.constructor;i.prototype=new o("Octane View"),i.prototype.define({handleEvent:function(a){switch(a.type){case"translated":this.setCanvasHeight();break;case"resize":this.setCanvasHeight();break;case"orientationchange":this.setCanvasHeight()}},load:function(){$("body").velocity("scroll",{duration:200}),this.$elem.css({visibility:"visible",display:"block","z-index":9999999999}),"fade"!==this.loadsBy&&this.$elem.css({opacity:1}),this.setCanvasHeight();var a=$.Deferred();return $animations.loads[this.loadsBy].bind(this,a)()},exit:function(){var a=this,b=$.Deferred();return $animations.exits[this.exitsBy].bind(a,b)().done(function(){a.$elem.css({"z-index":-1,visibility:"hidden",display:"none",opacity:0}),a.setPosition(this.loadsFrom)})},setCanvasHeight:function(){var a=[];this.$elem.children().each(function(){a.push($(this).height())});var b=_.reduce(a,function(a,b){return a+b});document.querySelector("o-canvas").setAttribute("style","height:"+b+"px")},setPosition:function(a){var b=this.$elem,c=new __.Switch({left:function(){b.css({left:-(1.1*$(window).width()),top:0})},right:function(){b.css({right:-(1.1*$(window).width()),top:0})},top:function(){b.css({top:-(1.1*$(window).height()),left:0,right:0})},bottom:function(){b.css({bottom:-(1.1*$(window).height()),left:0,right:0})},onscreen:function(){b.css({left:0,right:0,top:0})},"default":function(){b.css({left:-(1.1*$(window).width()),top:0})}});c.run(a)},doCallbacks:function(){for(var a=this.doneLoading,b=0,c=a.length;c>b;b++)_.isFunction(a[b])&&a[b].bind($this)()}}),h()}),Octane.Library("viewAnimations",{applyLoading:function(){},removeLoading:function(){},loads:{slide:function(a){var b=this,c=b.$elem,d={duration:b.loadDuration,easing:b.loadEasing,complete:function(){b.onLoadComplete(a)}},e=new __.Switch({left:function(){c.velocity({left:"0%"},d)},right:function(){c.velocity({right:"0%"},d)},top:function(){c.velocity({top:"0%"},d)},bottom:function(){c.velocity({bottom:"0%"},d)}});return e.run(b.loadsFrom),a},fade:function(a){var b=this,c=b.$elem;return b.setPosition("onscreen"),c.velocity("fadeIn",{display:"block",easing:b.loadEasing,duration:b.loadDuration,complete:function(){b.onLoadComplete(a)}}),a}},exits:{slide:function(a){var b=this,c=b.$elem,d={duration:b.exitDuration,easing:b.exitEasing,complete:function(){b.onExitComplete(a)}},e=new __.Switch({left:function(){c.velocity({left:-(1.1*$(window).width()),right:2.2*$(window).width()},d)},right:function(){c.velocity({right:-(1.1*$(window).width()),left:2.2*$(window).width()},d)},top:function(){c.velocity({top:-(1.1*$(window).height()),bottom:2.2*$(window).height()},d)},bottom:function(){c.velocity({bottom:-(1.1*$(window).height()),top:2.2*$(window).height()},d)}});return e.run(b.exitsTo),a},fade:function(a){var b=this,c=b.$elem;return c.velocity("fadeOut",{display:"none",easing:b.exitEasing,duration:b.exitDuration,complete:function(){b.onExitComplete(a)}}),a}}}),Octane.Module("Translator",function(a){function b(a){_.isObject(a)&&(k.rosettaStone=a);for(var b=document.querySelectorAll("[o-lang]"),d=0,e=b.length;e>d;d++)c(b[d]);k.dropdown.pill.html(k.lang.display+" "),Octane.fire("translated")}function c(a){var b=a.getAttribute("o-lang"),c=h(b);a.firstChild&&3==a.firstChild.nodeType?a.firstChild.data=c:a.insertBefore(document.createTextNode(c),a.firstChild)}function d(a,b){var c=k.dropdown;switch(!0){case _.isString(b):c.wrapper=$(b);break;case __.is$(b):c.wrapper=b}c.outerUL.appendTo(c.wrapper),c.outerLI.append(c.pill).append(c.innerUL).appendTo(c.outerUL),a=_.isArray(a)?a:[];var d,e,f,g=a.length;for(d=0;g>d;d++)e=j(a[d]),e&&(f=$("<li></li>"),f.addClass(c.classKey).attr("data-"+c.dataKey,e.key).html(e.display).appendTo(c.innerUL));i()}function e(){var a=__.location().searchObject;k.lang=j(a.lang)||k.defaultLang}function f(){return k.lang.key}function g(a){return j(a)?(k.lang=j(a),f()):void 0}function h(a){var b,c,d,e;return k.isPaginated?(b=_.isString(a)?a.split("-"):[],c=b[0],d=b[1],e=k.rosettaStone[c]&&k.rosettaStone[c][d]?k.rosettaStone[c][d]:null):e=k.rosettaStone[a]?k.rosettaStone[a]:null,e?e[k.lang.abbr]?e[k.lang.abbr]:e[k.defaultLang.abbr]:""}function i(){var a,c;$("li."+k.dropdown.classKey).on("click",function(){a=$(this),c=a.data(k.dropdown.dataKey),g(c),b(),k.dropdown.pill.trigger("click")}),k.dropdown.pill.on("click",function(){var a=$(this);a.hasClass("closed")?(a.removeClass("closed").addClass("open"),k.dropdown.innerUL.show()):a.hasClass("open")&&(a.removeClass("open").addClass("closed"),k.dropdown.innerUL.hide())})}function j(a){var b,c,d=k.languages.length;for(b=0;d>b;b++)if(c=k.languages[b],c.regexp&&c.regexp.test&&c.regexp.test(a))return c;return!1}var k={};a=a||{},k.rosettaStone=_.isObject(a.langData)?a.langData:{},k.isPaginated=_.isBoolean(a.paginated)?a.paginated:!1,k.langSupport=_.isArray(a.langSupport)?a.langSupport:["English"],k.dropdown={wrapper:$("o-control#translator"),outerUL:$('<ul class="nav nav-pills"></ul>'),outerLI:$('<li class="dropdown"></li>'),pill:$('<a id="selected-language" class="dropdown-toggle closed" data-toggle="dropdown"></a>'),caret:$('<span class="caret"></span>'),innerUL:$('<ul class="dropdown-menu" role="menu"></ul>'),classKey:"language-selector",dataKey:"language-selected"},k.languages=[{key:"English",display:"English",abbr:"en",regexp:/^_?(english|eng|en)$/i},{key:"Russian",display:"Русский",abbr:"ru",regexp:/^_?(russian|rus|ru|Русский)$/i},{key:"Spanish",display:"Español",abbr:"es",regexp:/^_?(spanish|espanol|esp|es|español)$/i},{key:"French",display:"Françias",abbr:"fr",regexp:/^_?(french|francias|françias|fra|fr)$/i},{key:"German",display:"Deutsch",abbr:"de",regexp:/^_?(german|deutsch|ger|de)$/i},{key:"Chinese",display:"简体中文",abbr:"zh",regexp:/^_?(chinese|zh|简体中文)$/i},{key:"Portugese",display:"Portugese",abbr:"pt",regexp:/^_?(portugese|port|pt)$/i},{key:"Japanese",display:"日本語",abbr:"ja",regexp:/^_?(japanese|jap|ja|日本語|nihongo)$/i}],k.defaultLang=j(a.defaultLang)||k.languages[0],this.define({renderTranslator:function(a,b){return d(a,b)},translate:function(a){return b(a)},translateElement:function(a){c(a)},getLang:function(){return f()},setLang:function(a){return g(a)}}),e(),d(k.langSupport),b()});