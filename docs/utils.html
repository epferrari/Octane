<!DOCTYPE html>

<html>
<head>
  <title>utils.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="Collection.html">
                  Collection.js
                </a>
              
                
                <a class="source" href="Controller.html">
                  Controller.js
                </a>
              
                
                <a class="source" href="Dictionary.html">
                  Dictionary.js
                </a>
              
                
                <a class="source" href="Factory.html">
                  Factory.js
                </a>
              
                
                <a class="source" href="Octane.html">
                  Octane.js
                </a>
              
                
                <a class="source" href="OctaneBase.html">
                  OctaneBase.js
                </a>
              
                
                <a class="source" href="OctaneModal.html">
                  OctaneModal.js
                </a>
              
                
                <a class="source" href="OctaneModel.html">
                  OctaneModel.js
                </a>
              
                
                <a class="source" href="OctaneModule.html">
                  OctaneModule.js
                </a>
              
                
                <a class="source" href="OctanePage.html">
                  OctanePage.js
                </a>
              
                
                <a class="source" href="Template.html">
                  Template.js
                </a>
              
                
                <a class="source" href="Translator.html">
                  Translator.js
                </a>
              
                
                <a class="source" href="ViewFrame.html">
                  ViewFrame.js
                </a>
              
                
                <a class="source" href="ViewModel.html">
                  ViewModel.js
                </a>
              
                
                <a class="source" href="_octane.html">
                  _octane.js
                </a>
              
                
                <a class="source" href="app-model.html">
                  app-model.js
                </a>
              
                
                <a class="source" href="compiler.html">
                  compiler.js
                </a>
              
                
                <a class="source" href="component.html">
                  component.js
                </a>
              
                
                <a class="source" href="debug.html">
                  debug.js
                </a>
              
                
                <a class="source" href="dom.html">
                  dom.js
                </a>
              
                
                <a class="source" href="events.html">
                  events.js
                </a>
              
                
                <a class="source" href="extend.html">
                  extend.js
                </a>
              
                
                <a class="source" href="filters.html">
                  filters.js
                </a>
              
                
                <a class="source" href="http.html">
                  http.js
                </a>
              
                
                <a class="source" href="logger.html">
                  logger.js
                </a>
              
                
                <a class="source" href="quarterback.html">
                  quarterback.js
                </a>
              
                
                <a class="source" href="router.html">
                  router.js
                </a>
              
                
                <a class="source" href="ui-layers.html">
                  ui-layers.js
                </a>
              
                
                <a class="source" href="uiMessages.html">
                  uiMessages.js
                </a>
              
                
                <a class="source" href="utils.html">
                  utils.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>utils.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-keyword">var</span> utils = {</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>checks for a sting with no value
[undefined, null, ‘’, empty string]</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	isBlank: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">param</span>)</span>{
		<span class="hljs-keyword">if</span>(param === <span class="hljs-literal">undefined</span> || param === <span class="hljs-literal">null</span> || param === <span class="hljs-string">''</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
	},

	isEmail: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">email</span>)</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-regexp">/^[-0-9a-zA-Z]+[-0-9a-zA-Z.+_]+@(?:[A-Za-z0-9-]+\.)+[a-zA-Z]{2,4}$/</span>.test(email);
	},</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>create events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	createEvent:<span class="hljs-function"><span class="hljs-keyword">function</span>  (<span class="hljs-params">type</span>) </span>{
		<span class="hljs-keyword">var</span> event;
		<span class="hljs-keyword">try</span> {
				event = <span class="hljs-keyword">new</span> Event(type);
		}<span class="hljs-keyword">catch</span>(e){
				event = <span class="hljs-built_in">document</span>.createEvent(<span class="hljs-string">'event'</span>);
				event.initEvent(type,<span class="hljs-literal">true</span>,<span class="hljs-literal">false</span>);
		}
		<span class="hljs-keyword">return</span> event;
	},</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>create custom events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	customEvent: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">type,params</span>) </span>{
		<span class="hljs-keyword">var</span> event;
		<span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.CustomEvent) {

			<span class="hljs-keyword">try</span>{
				params = params || { bubbles: <span class="hljs-literal">false</span>, cancelable: <span class="hljs-literal">false</span>, detail: {} };
				event = <span class="hljs-keyword">new</span> CustomEvent(type, params);
			}<span class="hljs-keyword">catch</span> (e){
				event = <span class="hljs-built_in">document</span>.createEvent(<span class="hljs-string">'CustomEvent'</span>);
				event.initCustomEvent(type, params.bubbles || <span class="hljs-literal">false</span>, params.cancelable || <span class="hljs-literal">false</span>, params.detail || {});
			}

		} <span class="hljs-keyword">else</span> {
			event = <span class="hljs-built_in">document</span>.createEvent(<span class="hljs-string">'CustomEvent'</span>);
			event.initCustomEvent(type, params.bubbles || <span class="hljs-literal">false</span>, params.cancelable || <span class="hljs-literal">false</span>, params.detail || {});
		}
		<span class="hljs-keyword">return</span> event;
	},</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>a better typeof operation, although slower, it has the benefit of being predicatble
credit: Angus Croll
<a href="http://javascriptweblog.wordpress.com/2011/08/08/fixing-the-javascript-typeof-operator/">http://javascriptweblog.wordpress.com/2011/08/08/fixing-the-javascript-typeof-operator/</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	typeOf: 		<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">obj</span>) </span>{
		<span class="hljs-keyword">return</span> ({}).toString.call(obj).match(<span class="hljs-regexp">/\s([a-zA-Z]+)/</span>)[<span class="hljs-number">1</span>].toLowerCase();
	},</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>create objects from query string in URL
credit Cory LaViska,
<a href="http://www.abeautifulsite.net/parsing-urls-in-javascript/">http://www.abeautifulsite.net/parsing-urls-in-javascript/</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-comment">/* --------------------------------------------------------------------- */</span>
	urlObject: 	<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)</span>{
		<span class="hljs-keyword">var</span> parser = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'a'</span>),
				searchObject = {},queries, param, n, key, val;</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>Let the browser do the work</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		parser.href = <span class="hljs-built_in">window</span>.location;</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Convert query string to object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		queries = parser.search.replace(<span class="hljs-regexp">/^\?/</span>,<span class="hljs-string">''</span>).split(<span class="hljs-string">'&amp;'</span>);

		n = queries.length;

		<span class="hljs-keyword">while</span>(n--){
			param = queries[n].split(<span class="hljs-string">'='</span>);

			<span class="hljs-keyword">if</span>(param){
				key = param[<span class="hljs-number">0</span>];
				val = param[<span class="hljs-number">1</span>];
				<span class="hljs-keyword">if</span>(!utils.isBlank(key)) searchObject[key] = val;
			}
		}
		<span class="hljs-keyword">return</span> {
			protocol			: parser.protocol,
			host					: parser.host,
			hostname			: parser.hostname,
			port					: parser.port,
			pathname			: parser.pathname,
			searchString	: parser.search,
			searchObject	: searchObject,
			hash					: parser.hash
		};
	},


	titleize: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">string</span>)</span>{

		<span class="hljs-keyword">if</span>(utils.typeOf(string) == <span class="hljs-string">'string'</span>){
			<span class="hljs-keyword">return</span> string
			.replace(<span class="hljs-regexp">/[-_]+/g</span>,<span class="hljs-string">' '</span>)
			.trim()
			.replace(<span class="hljs-regexp">/^.|\s+?[a-z]/g</span>,
				<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">chr</span>)</span>{
					<span class="hljs-keyword">return</span> chr.toUpperCase();
			})
			.replace(<span class="hljs-regexp">/([a-z])([A-Z])/g</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">pattern,chr1,chr2</span>)</span>{
				<span class="hljs-keyword">return</span> chr1+<span class="hljs-string">' '</span>+chr2.toUpperCase();
			})
		}
	},


	camelize: 	<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">string</span>)</span>{

		<span class="hljs-keyword">if</span>(utils.typeOf(string) == <span class="hljs-string">'string'</span>){
			<span class="hljs-keyword">return</span> string
			.replace(<span class="hljs-regexp">/\W+?[a-z]|\_+?[a-z]/g</span>,
				<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">chr</span>)</span>{
					<span class="hljs-keyword">return</span> chr.toUpperCase();
			})
			.replace(<span class="hljs-regexp">/\W+|\_+/g</span>,<span class="hljs-string">''</span>);
		}
	},


	dashify : 	<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">string</span>)</span>{
		<span class="hljs-keyword">if</span>(utils.typeOf(string) == <span class="hljs-string">'string'</span>){
			<span class="hljs-keyword">return</span> string
			.trim()
			.replace(<span class="hljs-regexp">/([a-z])([A-Z])/g</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">pattern,chr1,chr2</span>)</span>{
				<span class="hljs-keyword">return</span> chr1+<span class="hljs-string">'-'</span>+chr2.toLowerCase();
			})
			.replace(<span class="hljs-regexp">/[A-Z]/g</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">chr</span>)</span>{
				<span class="hljs-keyword">return</span> chr.toLowerCase();
			})
			.replace(<span class="hljs-regexp">/\s+|[_]+/g</span>,<span class="hljs-string">'-'</span>)
			.replace(<span class="hljs-regexp">/-{2,}/g</span>,<span class="hljs-string">'-'</span>);
		}
	},


	inArray : 	<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">array,value</span>)</span>{
		<span class="hljs-keyword">return</span> array.indexOf(value) !== -<span class="hljs-number">1</span>;
	},</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>wrap a thenable in a bluebird promise</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	promisify: 	<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">deferred</span>)</span>{
		<span class="hljs-keyword">var</span> args = <span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">1</span>);
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resolve,reject</span>)</span>{
			deferred.apply(deferred,args).then(resolve,reject);
		});
	},

	guid: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">obj</span>)</span>{

		<span class="hljs-keyword">if</span>(obj &amp;&amp; !(obj <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Object</span>)) <span class="hljs-keyword">return</span>;
		<span class="hljs-keyword">if</span>(!obj) obj = <span class="hljs-keyword">this</span>;
		<span class="hljs-keyword">if</span>(obj.octane_id) <span class="hljs-keyword">return</span> obj.octane_id;

		<span class="hljs-keyword">var</span> random4 = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">return</span> (((<span class="hljs-number">1</span> + <span class="hljs-built_in">Math</span>.random()) * <span class="hljs-number">0x10000</span>)|<span class="hljs-number">0</span>).toString(<span class="hljs-number">16</span>).substring(<span class="hljs-number">1</span>).toUpperCase();
		};

		<span class="hljs-built_in">Object</span>.defineProperty(obj,<span class="hljs-string">'octane_id'</span>,{
			value : random4() +<span class="hljs-string">'-'</span>+ random4() +<span class="hljs-string">'-'</span>+ random4() + random4(),
			writable : <span class="hljs-literal">false</span>,
			configurable : <span class="hljs-literal">false</span>,
			enumerable : <span class="hljs-literal">false</span>
		});
		<span class="hljs-keyword">if</span>(obj.setAttribute) obj.setAttribute(<span class="hljs-string">'octane-id'</span>,obj.octane_id);
		<span class="hljs-keyword">return</span> obj.octane_id;
	}
};

<span class="hljs-built_in">module</span>.exports = utils;</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
