<!DOCTYPE html>

<html>
<head>
  <title>Octane.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="Collection.html">
                  Collection.js
                </a>
              
                
                <a class="source" href="Controller.html">
                  Controller.js
                </a>
              
                
                <a class="source" href="Dictionary.html">
                  Dictionary.js
                </a>
              
                
                <a class="source" href="Factory.html">
                  Factory.js
                </a>
              
                
                <a class="source" href="Octane.html">
                  Octane.js
                </a>
              
                
                <a class="source" href="OctaneBase.html">
                  OctaneBase.js
                </a>
              
                
                <a class="source" href="OctaneModal.html">
                  OctaneModal.js
                </a>
              
                
                <a class="source" href="OctaneModel.html">
                  OctaneModel.js
                </a>
              
                
                <a class="source" href="OctaneModule.html">
                  OctaneModule.js
                </a>
              
                
                <a class="source" href="OctanePage.html">
                  OctanePage.js
                </a>
              
                
                <a class="source" href="Template.html">
                  Template.js
                </a>
              
                
                <a class="source" href="Translator.html">
                  Translator.js
                </a>
              
                
                <a class="source" href="ViewFrame.html">
                  ViewFrame.js
                </a>
              
                
                <a class="source" href="ViewModel.html">
                  ViewModel.js
                </a>
              
                
                <a class="source" href="_octane.html">
                  _octane.js
                </a>
              
                
                <a class="source" href="app-model.html">
                  app-model.js
                </a>
              
                
                <a class="source" href="compiler.html">
                  compiler.js
                </a>
              
                
                <a class="source" href="component.html">
                  component.js
                </a>
              
                
                <a class="source" href="debug.html">
                  debug.js
                </a>
              
                
                <a class="source" href="dom.html">
                  dom.js
                </a>
              
                
                <a class="source" href="events.html">
                  events.js
                </a>
              
                
                <a class="source" href="extend.html">
                  extend.js
                </a>
              
                
                <a class="source" href="filters.html">
                  filters.js
                </a>
              
                
                <a class="source" href="http.html">
                  http.js
                </a>
              
                
                <a class="source" href="logger.html">
                  logger.js
                </a>
              
                
                <a class="source" href="quarterback.html">
                  quarterback.js
                </a>
              
                
                <a class="source" href="router.html">
                  router.js
                </a>
              
                
                <a class="source" href="ui-layers.html">
                  ui-layers.js
                </a>
              
                
                <a class="source" href="uiMessages.html">
                  uiMessages.js
                </a>
              
                
                <a class="source" href="utils.html">
                  utils.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>Octane.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module,exports</span>)</span>{
<span class="hljs-pi">	'use strict'</span>;

	<span class="hljs-comment">/* ------------------------------------------------------- */</span>
	<span class="hljs-comment">/*                 OCTANE MVC FRAMEWORK                    */</span>
	<span class="hljs-comment">/* ------------------------------------------------------- */</span></pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>@author Ethan Ferrari <a href="&#x6d;&#97;&#x69;&#108;&#116;&#111;&#58;&#x65;&#116;&#104;&#x61;&#110;&#64;&#101;&#116;&#104;&#x61;&#110;&#102;&#101;&#x72;&#x72;&#x61;&#114;&#x69;&#46;&#99;&#x6f;&#x6d;">&#x65;&#116;&#104;&#x61;&#110;&#64;&#101;&#116;&#104;&#x61;&#110;&#102;&#101;&#x72;&#x72;&#x61;&#114;&#x69;&#46;&#99;&#x6f;&#x6d;</a>
ethanferrari.com/octane
<a href="http://onefiremedia.com">http://onefiremedia.com</a>
<a href="https://github.com/epferrari/octane.git">https://github.com/epferrari/octane.git</a>
@version 1.0.0
1 June 2015</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>

	<span class="hljs-comment">/* ------------------------------------------------------- */</span>
	<span class="hljs-comment">/*                         BASE                            */</span>
	<span class="hljs-comment">/* ------------------------------------------------------- */</span>

		<span class="hljs-keyword">var</span> define       = <span class="hljs-built_in">Object</span>.defineProperty;
		<span class="hljs-keyword">var</span> _            = <span class="hljs-built_in">require</span>(<span class="hljs-string">'lodash'</span>);
		<span class="hljs-keyword">var</span> <span class="hljs-built_in">Promise</span>      = <span class="hljs-built_in">require</span>(<span class="hljs-string">'bluebird'</span>);
		<span class="hljs-keyword">var</span> FastClick    = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fastclick'</span>);
		<span class="hljs-keyword">var</span> Velocity     = <span class="hljs-built_in">require</span>(<span class="hljs-string">'velocity-animate'</span>);
		<span class="hljs-keyword">var</span> _octane      = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./_octane.js'</span>);
		<span class="hljs-keyword">var</span> utils        = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./utils.js'</span>);
		<span class="hljs-keyword">var</span> debug        = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./debug.js'</span>);
		<span class="hljs-keyword">var</span> AppModel     = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./app-model.js'</span>);
		<span class="hljs-keyword">var</span> css          = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../css/octane.css'</span>);

		<span class="hljs-built_in">require</span>(<span class="hljs-string">'velocity-ui-pack'</span>);
		global._ = _;
		global.Promise = <span class="hljs-built_in">Promise</span>;






	<span class="hljs-comment">/* ------------------------------------------------------- */</span>
	<span class="hljs-comment">/*               PUBLIC APPLICATION OBJECT                 */</span>
	<span class="hljs-comment">/* ------------------------------------------------------- */</span>

		<span class="hljs-keyword">var</span> OctaneBase = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./OctaneBase.js'</span>);

		<span class="hljs-keyword">var</span> Octane = <span class="hljs-keyword">new</span> OctaneBase();




	<span class="hljs-comment">/* ------------------------------------------------------- */</span>
	<span class="hljs-comment">/*                          EVENTS                         */</span>
	<span class="hljs-comment">/* ------------------------------------------------------- */</span>

		Octane.defineProp({

			dispatch: 	<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">type,detail</span>)</span>{
				<span class="hljs-keyword">if</span>(_.isString(type)){
					<span class="hljs-keyword">var</span> e = utils.customEvent(type,{
						bubbles: 	<span class="hljs-literal">true</span>,
						detail: 	detail
					});
					<span class="hljs-built_in">window</span>.dispatchEvent(e);
				}
			},</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>programatically alert that user data has changed on a data-bound element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			trip: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">node,eventType</span>)</span>{
				<span class="hljs-keyword">var</span> rand = <span class="hljs-built_in">Math</span>.random();
				<span class="hljs-keyword">var</span>	e = utils.customEvent((eventType || <span class="hljs-string">'input'</span>),{bubbles:<span class="hljs-literal">true</span>,detail:rand});
				node.dispatchEvent(e);
			}
		});




	<span class="hljs-comment">/* ------------------------------------------------------- */</span>
	<span class="hljs-comment">/*             COMPILER and ORDINANCE ASSIGNMENT           */</span>
	<span class="hljs-comment">/* ------------------------------------------------------- */</span>

		<span class="hljs-keyword">var</span> Compiler = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./Compiler.js'</span>);

		Octane.defineProp({

			compiler: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">qselector,task</span>)</span>{
				Compiler.assign(qselector,task);
				<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
			},</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>alias of .compiler</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			designate: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">qselector,task</span>)</span>{
				Compiler.assign(qselector,task);
				<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
			},

			recompile: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">context</span>)</span>{
				<span class="hljs-keyword">return</span> Compiler.compileAll(context);
			},

			clearCompileCache: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
				Compiler.nodeMap = {};
			}
		});


	<span class="hljs-comment">/* ------------------------------------------------------- */</span>
	<span class="hljs-comment">/*                     XMLHttpRequest                      */</span>
	<span class="hljs-comment">/* ------------------------------------------------------- */</span></pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Not implemented at this time</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>


	<span class="hljs-comment">/* ------------------------------------------------------- */</span>
	<span class="hljs-comment">/*                       DICTIONARIES                      */</span>
	<span class="hljs-comment">/* ------------------------------------------------------- */</span>

		<span class="hljs-keyword">var</span> Dictionary = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./Dictionary.js'</span>);

		Octane.defineProp({ Dictionary : Dictionary	});




	<span class="hljs-comment">/* ------------------------------------------------------- */</span>
	<span class="hljs-comment">/*                       TEMPLATES                         */</span>
	<span class="hljs-comment">/* ------------------------------------------------------- */</span>

		<span class="hljs-keyword">var</span> Template = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./Template.js'</span>);

		Octane.defineProp({ Template: Template });




	<span class="hljs-comment">/* ------------------------------------------------------- */</span>
	<span class="hljs-comment">/*                         MODELS                          */</span>
	<span class="hljs-comment">/* ------------------------------------------------------- */</span>

		<span class="hljs-keyword">var</span> OctaneModel = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./OctaneModel.js'</span>);

		Octane.defineProp({

			Model: 		 	OctaneModel,</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>functional alias for calling new Octane.Model() or Octane.Model.create()
returns a named model if it already exists</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			model: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>)</span>{

				<span class="hljs-keyword">if</span>(_.isString(data)){
					<span class="hljs-keyword">var</span> alias = data;</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>only an alias was passed and it’s currently occupied on the ViewModel
return the model occupying that alias</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span>(_octane.models[alias]){
						<span class="hljs-keyword">return</span> _octane.models[alias];</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>only an alias was passed and it’s vacant on the ViewModel
create new model, assign it to the alias, and return it</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					} <span class="hljs-keyword">else</span> {
						<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> OctaneModel().become(alias);
					}
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>alias was not passed, return an unassigned model instance
possibly with data to set</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> OctaneModel(data);
			},</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>access a bound model’s get method from the application object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			get: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">modelStateKey</span>)</span>{

				<span class="hljs-keyword">var</span> modelName = OctaneModel._parseName(modelStateKey);
				<span class="hljs-keyword">var</span> stateKey = OctaneModel._parseKey(modelStateKey);
				<span class="hljs-keyword">var</span> model = _octane.models[modelName];

				<span class="hljs-keyword">if</span>(model &amp;&amp; stateKey){
					<span class="hljs-keyword">return</span> model.get(stateKey);
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(model){
					<span class="hljs-keyword">return</span> model.get();
				}
			},</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>access a bound model’s set method from the application object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			set: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key,val</span>)</span>{

				<span class="hljs-keyword">var</span> inbound;
				<span class="hljs-keyword">var</span> tk = utils.typeOf(key);

				<span class="hljs-keyword">if</span>(tk === <span class="hljs-string">'object'</span>){
					inbound = key;
				}
				<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(tk === <span class="hljs-string">'string'</span>){
					(inbound = {})[key] = val;
				}
				<span class="hljs-keyword">else</span> {
					inbound = {};
				}

				_.forOwn(inbound,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value,path</span>)</span>{
					<span class="hljs-keyword">var</span> name 	= OctaneModel._parseName(path);
					<span class="hljs-keyword">var</span> _key 	= OctaneModel._parseKey(path);
					<span class="hljs-keyword">var</span> model = _octane.models[name] || ( Octane.Model.create().become(name) );
					<span class="hljs-keyword">if</span>(model){
						(_key !== <span class="hljs-string">''</span>) ? model.set(_key,value) : model.reset(value);
					}
				});
			},</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>access a bound model’s unset method from the application object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			unset: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">toUnset,options</span>)</span>{

				<span class="hljs-keyword">if</span>(!toUnset) <span class="hljs-keyword">return</span>;
				_.isPlainObject(options) || (options = {});
				_.isArray(toUnset) || (toUnset = toUnset.split(<span class="hljs-string">','</span>));

				<span class="hljs-keyword">var</span> unset = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">binding</span>)</span>{
						binding 	= binding.trim();
						<span class="hljs-keyword">var</span> name 	= OctaneModel._parseName(binding);
						<span class="hljs-keyword">var</span> key 	= OctaneModel._parseKey(binding);
						<span class="hljs-keyword">var</span> model = _octane.models[name];
						model &amp;&amp; model.unset(key);
				};
				<span class="hljs-keyword">var</span> timeout = options.timeout;
				<span class="hljs-keyword">var</span> throttle = options.throttle;

				<span class="hljs-keyword">if</span>(timeout &amp;&amp; (utils.typeOf(timeout) === <span class="hljs-string">'number'</span>)){</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>timout the unset</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						<span class="hljs-keyword">if</span>(throttle){</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>throttle the unsets</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>							_.each(toUnset,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">binding,i</span>)</span>{
								setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
										unset(binding);</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>make sure we timeout the 0 index</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>								},timeout*(i+<span class="hljs-number">1</span>));
							});
						}<span class="hljs-keyword">else</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>unset all together after timeout</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>							setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
								_.each(toUnset,unset);
							},timeout);
						}
				} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>unset all immediately</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						_.each(toUnset,unset);
				}
			}
		});




	<span class="hljs-comment">/* ------------------------------------------------------- */</span>
	<span class="hljs-comment">/*                  DEEP MODEL MONITORING                  */</span>
	<span class="hljs-comment">/* ------------------------------------------------------- */</span>

		<span class="hljs-keyword">var</span> watch = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">path,fn,thisArg</span>)</span>{
			<span class="hljs-keyword">var</span> watching;

			path.split(<span class="hljs-string">'.'</span>).reduce(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o,x,i</span>)</span>{
				watching = (i === <span class="hljs-number">0</span>) ? x : o + <span class="hljs-string">'.'</span> + x;</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>set handler for each state change in a subBinding</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">this</span>.any(<span class="hljs-string">'modelchange:'</span> + watching,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
					<span class="hljs-keyword">var</span> currentVal = Octane.get(watching);
					fn.apply((thisArg || <span class="hljs-keyword">this</span>),[currentVal,watching]);
				});
				<span class="hljs-keyword">return</span> watching;
			}.bind(<span class="hljs-keyword">this</span>),path[<span class="hljs-number">0</span>]);
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
		};

		define(OctaneBase.prototype,<span class="hljs-string">'watch'</span>,{
			value: watch,
			writable:<span class="hljs-literal">false</span>,
			configurable:<span class="hljs-literal">false</span>
		});

		define(OctaneModel.prototype,<span class="hljs-string">'watch'</span>,{
			value: watch,
			writable:<span class="hljs-literal">false</span>,
			configurable:<span class="hljs-literal">false</span>
		});




	<span class="hljs-comment">/* ------------------------------------------------------- */</span>
	<span class="hljs-comment">/*                      VIEW MODEL                         */</span>
	<span class="hljs-comment">/* ------------------------------------------------------- */</span>

		<span class="hljs-keyword">var</span> ViewModel = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./ViewModel.js'</span>);

		<span class="hljs-keyword">var</span> uptake = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">uptake</span>(<span class="hljs-params">e,el</span>)</span>{

			<span class="hljs-keyword">var</span> model = el.getAttribute(<span class="hljs-string">'o-model'</span>);
			<span class="hljs-keyword">var</span> binding = el.getAttribute(<span class="hljs-string">'o-bind'</span>);
			<span class="hljs-keyword">var</span> value;</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>if o-bind is the only attribute, use it as binding,
otherwise o-bind is a key of the o=model attribute</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			model &amp;&amp; (binding = model + <span class="hljs-string">'.'</span> + binding);

			<span class="hljs-keyword">if</span>(el.type === <span class="hljs-string">'file'</span>){
				value = el.files;
			}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(el.type === <span class="hljs-string">'checkbox'</span>){
				value = el.checked;
			}	<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(el.tagName === <span class="hljs-string">'TEXT-AREA'</span>){
				value = el.innerHTML;
			} <span class="hljs-keyword">else</span>{
				(value = el.value);
			}

			<span class="hljs-keyword">if</span>( value !== Octane.get(binding) ){
				Octane.set(binding,value);
			}
		};

		Compiler.assign(<span class="hljs-string">'[o-bind]'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">elem,binding</span>)</span>{

			Octane.on(<span class="hljs-string">'input click select'</span>,elem,uptake);

			<span class="hljs-keyword">if</span>(_.contains( [<span class="hljs-string">'file'</span>,<span class="hljs-string">'checkbox'</span>] ,elem.type)){
				Octane.on(<span class="hljs-string">'change'</span>,elem,uptake);
			} <span class="hljs-keyword">else</span> {
				Octane.watch(binding,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>)</span>{
					<span class="hljs-keyword">if</span>(value === <span class="hljs-literal">undefined</span> || value === <span class="hljs-literal">null</span>){
						value = <span class="hljs-string">''</span>;
					}
					elem.value = value;
				});
			}
		});

		Octane.defineProp({
			ViewModel: 	ViewModel,
			link: 			ViewModel.link,
			unlink: 		ViewModel.unlink
		});








	<span class="hljs-comment">/* ------------------------------------------------------- */</span>
	<span class="hljs-comment">/*                    COLLECTIONS                          */</span>
	<span class="hljs-comment">/* ------------------------------------------------------- */</span></pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>Not implemented at this time</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>





	<span class="hljs-comment">/* ------------------------------------------------------- */</span>
	<span class="hljs-comment">/*                     CONTROLLERS                         */</span>
	<span class="hljs-comment">/* ------------------------------------------------------- */</span>

		<span class="hljs-keyword">var</span> OctaneController = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./Controller.js'</span>);

		define(Octane,<span class="hljs-string">'controller'</span>,{
			value: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">name,config</span>)</span>{
				<span class="hljs-keyword">if</span>(!name){
					<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'OctaneController must have name'</span>);
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(!_octane.controllers[name]){
					<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> OctaneController(name,config);
				} <span class="hljs-keyword">else</span> {
					<span class="hljs-keyword">return</span> _octane.controllers[name];
				}
			},
			writable: <span class="hljs-literal">false</span>,
			configurable:<span class="hljs-literal">false</span>
		});


		define(Octane,<span class="hljs-string">'Controller'</span>,{
			value: OctaneController,
			writable: <span class="hljs-literal">false</span>,
			configurable: <span class="hljs-literal">false</span>
		});

		Compiler.assign(<span class="hljs-string">'[o-control]'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">elem,attrVal</span>)</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>ex. <ul  o-control="(click) [ListViewController.refresh>" o-delegator="li"..</ul>
elem: <ul>
attrVal: ‘(click)[ListViewController.refresh,li a]</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
			<span class="hljs-keyword">var</span> isDelegator = elem.hasAttribute(<span class="hljs-string">'o-delegator'</span>);
			<span class="hljs-keyword">var</span> delegates;

			<span class="hljs-keyword">if</span>(isDelegator) delegates = elem.getAttribute(<span class="hljs-string">'o-delegator'</span>);

			<span class="hljs-keyword">var</span> vals = attrVal.match( <span class="hljs-regexp">/(\(.*?\])/g</span> )||[];
			_.each(vals,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">str</span>)</span>{

				<span class="hljs-keyword">var</span> event,handler,params,action,ctrlName,method;

				event    = (str.match( <span class="hljs-regexp">/\((.*?)\)/</span> )||[<span class="hljs-literal">null</span>,<span class="hljs-string">'click'</span>])[<span class="hljs-number">1</span>];
				handler  = (str.match( <span class="hljs-regexp">/\[(.*?)\]/</span> )||[<span class="hljs-literal">null</span>,<span class="hljs-string">''</span>])[<span class="hljs-number">1</span>];
				params   = handler.split(<span class="hljs-string">','</span>);
				action   = (params.shift()||<span class="hljs-string">''</span>).split(<span class="hljs-string">'.'</span>);
				ctrlName = action[<span class="hljs-number">0</span>];
				method	 = action[<span class="hljs-number">1</span>];

				<span class="hljs-keyword">if</span>(isDelegator){
					elem.addEventListener(event,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{

						<span class="hljs-keyword">var</span> src,controller;

						src = (e.srcElement||e.target);
						controller = _octane.controllers[ ctrlName ];</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>If we’ve declared delegates AND
the event is fired from an element we’re delegating events for,
then the Controller.method is called with <em>src</em> as the first arg</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						<span class="hljs-keyword">if</span>(delegates &amp;&amp; _.contains(<span class="hljs-keyword">this</span>.querySelectorAll(delegates),src)){
							<span class="hljs-keyword">try</span>{
								controller[method].apply(controller,[src].concat(params));
							} <span class="hljs-keyword">catch</span>(ex){
								Octane.log(<span class="hljs-string">'delegated '</span>+ctrlName+<span class="hljs-string">'.'</span>+method+<span class="hljs-string">' could not be applied'</span>,ex);
							}</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>If we’ve declared that this element listens for events on its children
but did not define a querySelector pattern,
then the Controller.method is called with <code>this</code> as the first arg,
<code>this</code> being the object listening for the event</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(!delegates) {
							<span class="hljs-keyword">try</span>{
								controller[method].apply(controller,[<span class="hljs-keyword">this</span>].concat(params));
							}<span class="hljs-keyword">catch</span> (ex){
								Octane.log(<span class="hljs-string">'delegated '</span>+ctrlName+<span class="hljs-string">'.'</span>+method+<span class="hljs-string">' could not be applied'</span>,ex);
							}
						}
					});
				} <span class="hljs-keyword">else</span> {
					Octane.on(event,elem,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,el</span>)</span>{
						<span class="hljs-keyword">var</span> controller = _octane.controllers[ ctrlName ];
						<span class="hljs-keyword">try</span>{
							controller[method].apply(controller,[el].concat(params));
						} <span class="hljs-keyword">catch</span>(ex){
							Octane.log(<span class="hljs-string">'delegated '</span>+ctrlName+<span class="hljs-string">'.'</span>+method+<span class="hljs-string">' could not be applied'</span>,ex);
						}
					});
				}
				elem = <span class="hljs-literal">null</span>;
			});
		});




	<span class="hljs-comment">/* ------------------------------------------------------- */</span>
	<span class="hljs-comment">/*                       FILTERS                           */</span>
	<span class="hljs-comment">/* ------------------------------------------------------- */</span>

		<span class="hljs-keyword">var</span> filter = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./filters.js'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>filterFunction as: function([params]){…do something }</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		define(Octane,<span class="hljs-string">'filter'</span>,{
			value: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name,filterFunction</span>)</span>{
				filter.apply(<span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>),[name,filterFunction]);
				<span class="hljs-keyword">return</span> Octane;
			},
			writable: <span class="hljs-literal">false</span>,
			configurable: <span class="hljs-literal">false</span>
		});




	<span class="hljs-comment">/* ------------------------------------------------------- */</span>
	<span class="hljs-comment">/*                          HOOKS                          */</span>
	<span class="hljs-comment">/* ------------------------------------------------------- */</span></pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>A function to be applied before the setting of data in the model
If one model data value changes depending on another, a hook is the place for that logic.
Binding is the incoming data model.key to parse for, func is the function to apply
A hook is applied at set time to a binding</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
		define(Octane,<span class="hljs-string">'hook'</span>,{

			value: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">binding,fn</span>)</span>{
				(_octane.hooks[binding]||(_octane.hooks[binding]=[])).push(fn);
				<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>chainable</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			},
			writable: <span class="hljs-literal">false</span>,
			configurable: <span class="hljs-literal">false</span>
		});




	<span class="hljs-comment">/* ------------------------------------------------------- */</span>
	<span class="hljs-comment">/*                  RUNTIME MODULES                        */</span>
	<span class="hljs-comment">/* ------------------------------------------------------- */</span>

		<span class="hljs-keyword">var</span> OctaneModule = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./OctaneModule.js'</span>);

		Octane.defineProp({

			<span class="hljs-built_in">module</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name,dependencies</span>)</span>{
				_octane.modules[name] = <span class="hljs-keyword">new</span> OctaneModule(name,dependencies);
				<span class="hljs-keyword">return</span> _octane.modules[name];
			},

			hasModule: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">name</span>)</span>{
				<span class="hljs-keyword">return</span> (_octane.modules[name] &amp;&amp; _octane.modules[name].initialized);
			},

			moduleConfig: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">moduleName,cfg</span>)</span>{
				_.isPlainObject(cfg) &amp;&amp; (_octane.moduleConfigs[moduleName] = cfg);
			}
		});




	<span class="hljs-comment">/* ------------------------------------------------------- */</span>
	<span class="hljs-comment">/*                          DOM                            */</span>
	<span class="hljs-comment">/* ------------------------------------------------------- */</span>

		<span class="hljs-keyword">var</span> DOM = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./DOM.js'</span>);

		define(Octane,<span class="hljs-string">'DOM'</span>,{
			value: DOM,
			writable: <span class="hljs-literal">false</span>,
			configurable: <span class="hljs-literal">false</span>
		});



	<span class="hljs-comment">/* ------------------------------------------------------- */</span>
	<span class="hljs-comment">/*                     PAGE VIEWS                          */</span>
	<span class="hljs-comment">/* ------------------------------------------------------- */</span>

		<span class="hljs-keyword">var</span> Page = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./OctanePage.js'</span>);

		Octane.defineProp(<span class="hljs-string">'Page'</span>,Page);




	<span class="hljs-comment">/*-------------------------------------------------------	*/</span>
	<span class="hljs-comment">/*                          ROUTER                        */</span>
	<span class="hljs-comment">/*-------------------------------------------------------	*/</span>

		<span class="hljs-keyword">var</span> Router = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./Router.js'</span>);

		Octane.defineProp({ Router: Router });</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>add Router methods to Application Object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">var</span> routerMethods = [<span class="hljs-string">'route'</span>,<span class="hljs-string">'loadPageif'</span>,<span class="hljs-string">'beforePageLoad'</span>,<span class="hljs-string">'onPageLoad'</span>,<span class="hljs-string">'onPageExit'</span>];
		_.each(routerMethods,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">method</span>)</span>{
			Octane[method] = Router[method];
		});
		Octane.addRoute = Router.add;


		Compiler.assign(<span class="hljs-string">'o-page'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">elem</span>)</span>{
			<span class="hljs-keyword">var</span> page = <span class="hljs-keyword">new</span> Page(elem);
			Router.add(<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">'^('</span>+page.id+<span class="hljs-string">').*'</span>),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">id</span>)</span>{
				<span class="hljs-keyword">return</span> Router._loadPage(id);
			});
		});


	<span class="hljs-comment">/* ------------------------------------------------------- */</span>
	<span class="hljs-comment">/*                       MODALS                            */</span>
	<span class="hljs-comment">/* ------------------------------------------------------- */</span>

			<span class="hljs-keyword">var</span> Modal = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./OctaneModal.js'</span>);

			Octane.defineProp(<span class="hljs-string">'Modal'</span>,Modal);




	<span class="hljs-comment">/*-------------------------------------------------------	*/</span>
	<span class="hljs-comment">/*                  NATIVE APP ORDINANCES                 */</span>
	<span class="hljs-comment">/*-------------------------------------------------------	*/</span>

		Compiler.assign(<span class="hljs-string">'[o-src]'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">elem,value</span>)</span>{
			<span class="hljs-keyword">var</span> pattern = <span class="hljs-regexp">/\{\{([^{^}]+)\}\}|^(_*)$|^(\s*)$/g</span>;

			<span class="hljs-keyword">if</span>(!pattern.test(value)){
				elem.src = value;
				elem.removeAttribute(<span class="hljs-string">'o-src'</span>);
			} <span class="hljs-keyword">else</span> {
				elem.removeAttribute(<span class="hljs-string">'src'</span>);
				<span class="hljs-keyword">delete</span> elem.src;
			}
		});


		Compiler.assign(<span class="hljs-string">'[o-bg-img]'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">elem,value</span>)</span>{

			<span class="hljs-keyword">var</span> pattern = <span class="hljs-regexp">/\{\{([^{^}]+)\}\}|^(_*)$|^(\s*)$/g</span>;
			<span class="hljs-keyword">if</span>(!pattern.test(value)){
				elem.style.backgroundImage = <span class="hljs-string">'url('</span>+value+<span class="hljs-string">')'</span>;
				elem.removeAttribute(<span class="hljs-string">'o-bg-img'</span>);
			}
		});




	<span class="hljs-comment">/*-------------------------------------------------------	*/</span>
	<span class="hljs-comment">/*                      UI MESSAGES                       */</span>
	<span class="hljs-comment">/*-------------------------------------------------------	*/</span></pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>a model with method .hint that unsets itself after 5 seconds,
or the number of ms passed in as second param to .hint</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">var</span> uiMessages = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./uiMessages.js'</span>);

		Octane.defineProp({ uiMessages : uiMessages });

		Compiler.assign(<span class="hljs-string">'ui-message'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">elem</span>)</span>{
			<span class="hljs-keyword">var</span> vm = <span class="hljs-keyword">new</span> ViewModel(elem,<span class="hljs-string">'uiMessages'</span>);
			_octane.viewModels[vm.guid()] = vm;
		});




	<span class="hljs-comment">/* -------------------------------------------------------*/</span>
	<span class="hljs-comment">/*                        INIT                            */</span>
	<span class="hljs-comment">/* -------------------------------------------------------*/</span></pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>Getter and setter for environment,
used for feature detection.
Set to either ‘web’ or ‘cordova’</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-built_in">Object</span>.defineProperty(Octane,<span class="hljs-string">'env'</span>,{

		get: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
			<span class="hljs-keyword">return</span> _octane.environment;
		},
		set: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">env</span>)</span>{
			<span class="hljs-keyword">var</span> contexts = [<span class="hljs-string">'web'</span>,<span class="hljs-string">'cordova'</span>];
			_.contains(contexts,env) &amp;&amp; (_octane.environment = env);
		},
		configurable: <span class="hljs-literal">false</span>
		});


		Octane
		.hook(<span class="hljs-string">'App.loadingProgress'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">progress,inbound</span>)</span>{
			inbound.progress = inbound.progress &lt;= <span class="hljs-number">100</span> ? inbound.progress : <span class="hljs-number">100</span>;
			inbound.percent = inbound.progress.toString()+<span class="hljs-string">"%"</span>;
			inbound.screenReader = inbound.percent+<span class="hljs-string">' Loaded'</span>;
		})

		.hook(<span class="hljs-string">'App.loadingMessage'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">message,inbound</span>)</span>{
			inbound.message = _.isString(inbound.message) ? inbound.message : <span class="hljs-string">'Loading...'</span>;
		})

		.on(<span class="hljs-string">'octane:ready'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>unhide the app content hidden behind the loader</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">var</span> loadingContainer = Octane.DOM.loadingContainer;

			Octane.DOM.appContainer.classList.remove(<span class="hljs-string">'hidden'</span>);

			<span class="hljs-keyword">if</span>(Octane.defaultRoute){
				Router.route(Octane.defaultRoute);
			} <span class="hljs-keyword">else</span> {
				Router._executeRoute(global.location.href).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
					<span class="hljs-keyword">if</span>(Router.atRoot) Router.route(<span class="hljs-string">'home'</span>);
				});
			}

			setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
				Velocity(loadingContainer,<span class="hljs-string">'fadeOut'</span>,{duration:<span class="hljs-number">500</span>})
					.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
						<span class="hljs-built_in">document</span>.body.removeChild(loadingContainer);
					});
			},<span class="hljs-number">500</span>);
		});


		Octane.defineProp({

			initialize: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initialize</span> (<span class="hljs-params">appConfig,moduleConfigs</span>)</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>don’t reinitialize</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span>(_octane.initialized) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>attach fastclick.js for mobile touch</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> (<span class="hljs-built_in">document</span>.addEventListener) {
					<span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'DOMContentLoaded'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
						FastClick(<span class="hljs-built_in">document</span>.body);
					}, <span class="hljs-literal">false</span>);
				}




				_.isPlainObject(appConfig) || (appConfig = {});
				Octane.defaultRoute	= appConfig.Route;
				Octane.env = appConfig.env;
				_octane.animateBy = _.contains([<span class="hljs-string">'js'</span>,<span class="hljs-string">'css'</span>],appConfig.animateBy) ?
					appConfig.animateBy : <span class="hljs-string">'css'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>start the Router</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				Router[appConfig.legacyRouting ? <span class="hljs-string">'usePolling'</span> : <span class="hljs-string">'useBrowserEvents'</span>]();</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>establish module configuration
configs passed at init are used over those passed earlier
by individual calls to octane.configureModule</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				_.isObject(moduleConfigs) || (moduleConfigs = {});
				_.each(_octane.modules,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m,name</span>)</span>{
					<span class="hljs-keyword">if</span>(!_octane.moduleConfigs[name]) _octane.moduleConfigs[name] = {};

					_.merge(_octane.moduleConfigs[name],(moduleConfigs[name]||{}));
				});</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>parse the DOM initially to create virtual DOM model</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				Octane.defineProp(<span class="hljs-string">'App'</span>,AppModel);





				Octane.App.set({
					loadingProgress : <span class="hljs-number">0</span>,
					name : appConfig.appName
				});</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>hook for loading screens</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				Octane.hook(<span class="hljs-string">'App.loadingProgress'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value,inbound,current</span>)</span>{
					<span class="hljs-keyword">var</span> currentProgress = current.loadingProgress || <span class="hljs-number">0</span>;
					inbound.loadingProgress = currentProgress + inbound.loadingProgress;
				});</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>compile DOM templates</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				Template.compile();




				ViewModel.getScope();</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>add debugging support
set to false in production</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span>(appConfig.debugMode){
					define(_octane,<span class="hljs-string">'debugMode'</span>,{
						value: <span class="hljs-literal">true</span>,
						writable: <span class="hljs-literal">false</span>,
						configurable: <span class="hljs-literal">false</span>
					});
					Octane.defineGetter(<span class="hljs-string">'errors'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
						debug.getErrors();
					});

					Octane.defineGetter(<span class="hljs-string">'bootlog'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
						debug.getBootlog();
					});
					Octane.Reflection = _octane;
					debug.showConsole();

				} <span class="hljs-keyword">else</span> {
					define(_octane,<span class="hljs-string">'debugMode'</span>,{
						value: <span class="hljs-literal">false</span>,
						writable: <span class="hljs-literal">false</span>,
						configurable: <span class="hljs-literal">false</span>
					});
				}



				<span class="hljs-keyword">var</span> modules = _octane.modules;</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>load runtime modules -&gt; compile -&gt; ready!</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
				<span class="hljs-keyword">return</span> Compiler.compile(<span class="hljs-string">'o-view'</span>)
					.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
						<span class="hljs-keyword">return</span> Compiler.compile(<span class="hljs-string">'o-modal'</span>);
					})
					.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
						<span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-built_in">Object</span>.keys(modules));
					})
					.each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">m</span>)</span>{
						<span class="hljs-keyword">return</span> modules[m]._load();
					})
					.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
						<span class="hljs-keyword">return</span> Compiler.compileAll();
					})
					.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
						ViewModel.forceRefresh();

						define(_octane,<span class="hljs-string">'initialized'</span>,{
							value: <span class="hljs-literal">true</span>,
							writable: <span class="hljs-literal">false</span>,
							configurable: <span class="hljs-literal">false</span>
						});

						Octane.fire(<span class="hljs-string">'octane:ready'</span>);
					})
					.catch(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>)</span>{
						Octane.log(err);
					});</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>Octane initialize returns a Promise!</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			}
	});



<span class="hljs-built_in">module</span>.exports = global.octane = Octane;

})(<span class="hljs-built_in">module</span>,<span class="hljs-built_in">module</span>.exports);</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
